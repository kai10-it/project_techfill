# 2025-7-7

# 作業内容
## 細かい修正を行ったブランチをプッシュ  
- トップページや記事作成ページのURLをヘッダーに追加  
- Dockerfileのエラー修正  
- ボタンの位置調整
  
以上の修正をまとめて1つのブランチとしてGitHubにプッシュ  

## Rubocopの導入  
GitHubにプッシュした際、C/I（継続的インテグレーション）でLintチェックが失敗。  
原因はコードがスタイルガイド（規約）に沿っていないことによるエラー。  
GitHub上ではどの箇所でエラーが発生しているのか確認しづらいため、ローカル開発環境にもRuboCopを導入することに決定。  
今後は事前にスタイルチェックを行い、プッシュ前に問題を解消する運用を行う。  

# 振り返り
## 学び・気づき
- 公式ドキュメントをGoogle翻訳で読んでも表現が固く理解しづらかったが、ChatGPTを使って翻訳内容をかみ砕いてもらうことで、意味が明確になり理解が進んだ。
- GitHub上ではRuboCopが実行されているが、ローカル環境には導入していなかったため、自分の環境にも手動で導入する必要があると気づいた。
- RuboCopは、コードがスタイルガイド（ルール）に沿って書かれているかをチェックする品質管理ツールである。
- GitHubでC/I lintが失敗するのは、コードの書き方がルールに反している可能性が高いというサイン。
- C/I lintの失敗を放置すると、どこに問題があるか把握しづらくなるため、こまめな修正が重要。
- GitHub上でRuboCopは毎回ファイル全体をチェックしているためか、エラーが出た際に、どのファイルで問題があるのか特定しづらい印象がある。
- RuboCopを使ったことで、多くの修正箇所があることが判明。特に同一ファイル内に複数の修正がある場合、今までのように小さな変更ごとに細かくコミットしていると、コミットログが膨大になってしまう懸念を感じた。
- 他の開発者がどのようにコミットの粒度を決めているのか調べたところ、以下の記事を見つけた：[コミットの粒度について考える（Qiita）](https://qiita.com/jnchito/items/40e0c7d32fde352607be)。
- 今後は「意味のある単位でのコミット」を意識し、内容を整理したうえでログを見やすく、保守しやすい形にしていきたいと感じた。
- `# frozen_string_literal: true` は、文字列をイミュータブル（変更不可）にするためのマジックコメント（Rubyのソースコードファイルの先頭に書くことで、Rubyインタプリタやツールに特別な指示を与えるコメント）。これにより、文字列が誤って書き換えられることを防ぎ、予期せぬバグの発生を抑えられる。また、同じ文字列オブジェクトを使い回せるようになるため、メモリの使用量が減り、パフォーマンスの向上にもつながる。  
- `Gemfile`のような特殊なファイルでは `# frozen_string_literal: true` による恩恵は少ない。`Gemfile`は基本的にプログラムから書き換えられることがないため、イミュータブルにする必要性が低い。しかし、それでもあえて記述する理由は、RuboCopなどの静的解析ツールが、すべてのRubyファイルに一貫したルールを適用しているため。セキュリティや予期せぬ変更防止の観点から、安全性を高めるからである。
- 変数展開（`#{}`）や特殊文字（`\n` など）を使っていない単なる文字列は、ダブルクォーテーションではなくシングルクォーテーションで囲むことが推奨される。理由としては、「ただの文字列」であることが明確になり、可読性が上がる。また、シングルクォーテーションは、Rubyの処理系にとってダブルクォーテーションよりも解析の負担が少ない（※微差だが最適化の一環）。
- `%W( Hello World )` ではなく、`%W(Hello World)` のように、括弧の内側に余計なスペースを入れない書き方が推奨される。理由として一貫したスタイルを保つことと空白をなくすことで、視認性を保つため。

## 失敗・わからなかったこと
- RuboCopのバージョン互換性を調べる際に、公式ドキュメントではよく分からず、ChatGPTを使って確認した。ただし、内容が正確かどうか判断できない部分があるため、信頼性を検証できる手段も身につけたい。
- RuboCopを導入する際、`Gemfile`内のどのグループ（`group :development` か `group :development, :test`）に記述すべきか迷った。rubocop-rspecを使用する想定もあり、rubocopおよびrubocop-railsも含めて`development, :test`に追加したが、適切な分類について今後改めて整理したい。
- RuboCopの実行時、Dockerコンテナ内で`rubocop`コマンドが使えず原因が不明だった。ChatGPTに確認したところ、Dockerは隔離環境であるため、グローバルコマンドとして`rubocop`が使えないことがわかった。代わりに、`bundle exec rubocop`でGemfileに定義されたバージョンを使って実行する必要があった。また、これによりバージョンのずれも防ぐことが可能。
- 

## 挑戦
- これまでGemの使い方はChatGPTやWeb記事を参考にしていたが、今回は公式ドキュメントを読みながら学ぶことに挑戦。英語のハードルを感じたが、ChatGPTにURLを渡して内容を解説してもらうことで、理解しやすくなった。


# 現状の問題点
- コードスタイルの修正箇所が非常に多く、対応に時間がかかっている。
- `rubocop -A` を使えば自動で修正できるが、どのように修正されたか把握できなくなるため、現時点では使用を控えている。

## 今後の対応
- 時間と手間はかかるが、RuboCopのルールを理解することを優先し、1つひとつ手動でスタイルの修正を行う予定。

